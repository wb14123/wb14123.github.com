<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> ZFS Profiling on Arch Linux |  Bin Wang - My Personal Blog</title>
    <link rel="stylesheet" href="/static/css/default.css" type="text/css" />
    <link rel="stylesheet" href="/static/css/asciinema-player.css" type="text/css" />

		<!--
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-52904500-1', 'auto');
      ga('send', 'pageview');
    </script>
		-->

		<!-- Matomo -->
		<script>
		  var _paq = window._paq = window._paq || [];
		  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
		  _paq.push(['trackPageView']);
		  _paq.push(['enableLinkTracking']);
		  (function() {
		    var u="//matomo.rssbrain.com/";
		    _paq.push(['setTrackerUrl', u+'matomo.php']);
		    _paq.push(['setSiteId', '2']);
		    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
		  })();
		</script>
		<!-- End Matomo Code -->


  </head>

  <body>
    
    <div id="index_menu">
      
<!--
<div class="index-entry index-index"><a href="/">Home</a></div>
<div class="index-entry index-index"><a href="/snippets">Snippets</a></div>
<div class="index-entry index-index"><a href="https://www.goodreads.com/review/list/103708630-bin?shelf=read" target="_blank">Read</a></div>
<div class="index-entry index-index"><a href="/travel.html">Travel</a></div>
<div class="index-entry index-index"><a href="/search.html">Search</a></div>
<div class="index-entry index-index"><a href="/about.html">About</a></div>
<div class="index-entry index-index"><a href="/feed.xml" target="_blank">RSS</a></div>
-->




  

    <div class="index-entry index-index">
      
      Computer Science
      

    </div>

  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Algorithm
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2011-05-28-compute.html">任意进制数的补码 <span class="publish-year">(2011)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2011-07-11-quick-sort.html">快排杀手 <span class="publish-year">(2011)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-10-18-How-to-Estimate-Max-TPS-from-TPM.html">How to Estimate Max TPS from TPM <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Data Processing
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2015-04-29-Use-Docker-to-Submit-Spark-Jobs.html">Use Docker to Submit Spark Jobs <span class="publish-year">(2015)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2015-11-03-The-Proper-Way-to-Use-Spark-Checkpoint.html">The Proper Way to Use Spark Checkpoint <span class="publish-year">(2015)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2015-11-22-Use-Redis-Instead-of-Spark-Streaming-to-Count-Statistics.html">Use Redis Instead of Spark Streaming to Count Statistics <span class="publish-year">(2015)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Digital Life
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-07-26-Move-from-Twitter-to-Mastodon.html">Move from Twitter to Mastodon <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-08-02-What-Is-Wrong-abount-Recommendation-System.html">What Is Wrong about Recommendation System <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-08-15-Use-RSS-and-Kindle-to-Read-News.html">Use RSS and Kindle to Read News <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-08-23-Build-An-Instant_Messaging-System-without-Censorship-Choose-the-right-technology.html">Matrix: A Self Hosted Instant Messaging Solution with End to End Encryption <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-08-29-Build-An-Instant_Messaging-System-without-Censorship-Choose-An-Overview-of-Chinese-Internet-Censorship-Strategy.html">An Overview of China's Internet Censorship Strategy <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-09-08-Build-An-Instant-Messaging-System-without-Censorship-Deployment-Options.html">Deploy Matrix for Users in China <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Distributed System
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2018-07-29-A-Review-on-Spanner-and-Open-Source-Implementations.html">Spanner and Open Source Implementations <span class="publish-year">(2018)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2019-11-04-Great-Resources-for-Learning-Database-and-Distributed-System.html">Great Resources for Learning Database and Distributed System <span class="publish-year">(2019)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-09-16-Aurora-Database.html">Aurora Database <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-10-06-Understand-Liveness-and-Fairness-in-TLA.html">Understand Liveness and Fairness in TLA+ <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-11-02-Use-TLA+-to-Verify-Cache-Consistency.html">Use TLA+ to Verify Cache Consistency <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-11-29-Keep-Data-Consistency-During-Database-Migration.html">Keep Data Consistency During Database Migration <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-12-14-Redis-Implementation-for-Cache-and-Database-Consistency.html">Redis Implementation for Cache and Database Consistency <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Distributed System Infrastructure
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-03-13-Infrastructure-Setup-for-High-Availability.html">Infrastructure Setup for High Availability <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-05-22-Upgrade-Kubernetes-from-1.23-to-1.24.html">Upgrade Kubernetes from 1.23 to 1.24 <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-11-04-How-to-Cleanup-Ceph-Filesystem-for-Deleted-Kubernetes-Persistent-Volume.html">How to Cleanup Ceph Filesystem for Deleted Kubernetes Persistent Volume <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-11-28-Introduce-K3s-CephFS-and-MetalLB-to-My-High-Avaliable-Cluster.html">Introduce K3s, CephFS and MetalLB to My High Avaliable Cluster <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Machine Learning
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2015-01-17-Backpropagation-Algorithm.html">Backpropagation Algorithm <span class="publish-year">(2015)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2015-07-02-My-Recent-Work-About-Neural-Networks.html">My Recent Work About Neural Networks <span class="publish-year">(2015)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2015-11-08-Install-BLAS-Library-for-MXNet.html">Install BLAS Library for MXNet <span class="publish-year">(2015)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2016-05-14-How-to-Put-RNN-Layer-Into-Nueral-Network-Model.html">How to Put RNN Layers Into Neural Network Model <span class="publish-year">(2016)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2016-06-19-Build-A-Computer-for-Deep-Learning.html">Build A Computer for Deep Learning <span class="publish-year">(2016)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Operating System
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Android
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2016-02-11-The-Permission-of-Android-Becomes-A-Bigger-Problem-When-It-Comes-to-Wearable-Devices-and-TV.html">The Permission Management of Android Becomes A Bigger Problem When It Comes to Wearable Devices and TV <span class="publish-year">(2016)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2018-11-18-Root-And-Optimize-MiBox-3S.html">Root And Optimize MiBox 3S <span class="publish-year">(2018)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Linux
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2011-07-12-port666.html">端口666：毁灭！ <span class="publish-year">(2011)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-03-12-chroot.html">Chroot 简介 <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-11-27-Compile-And-Install-Kernel.html">Compile And Install Kernel <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-12-05-Backup-My-Dotfiles.html">Backup My Dotfiles <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-12-28-Comparison-Between-Linux-Desktop-Environments.html">Comparison Between Linux Desktop Environments <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-01-21-How-Kernel's-Makefile-Specify-Output-Directory.html">How Kernel's Makefile Specify Output Directory <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-10-06-Xbmc-on-Raspberry-Pi-with-Archlinux.html">Xbmc on Raspberry Pi with Archlinux <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2021-02-12-Setup-SSH-Authentication-with-YubiKey.html">Setup SSH Authentication with YubiKey <span class="publish-year">(2021)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2021-03-08-In-Defence-of-Disabling-Swap.html">In Defence of Disabling Swap <span class="publish-year">(2021)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-09-01-Build-a-Linux-Virtual-Machine-for-Windows-Apps.html">Build a Linux Virtual Machine for Windows Apps <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-10-22-Full-Disk-Encryption-with-Yubikey.html">Linux Full Disk Encryption with Yubikey <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Tizen
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-02-29-tizen.html">Tizen，加油 <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Windows
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2016-11-28-Config-Development-Environment-on-Windows.html">Build a Unix Like Environment on Windows <span class="publish-year">(2016)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      iOS
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-11-08-DNS-Resolving-Bug-in-iOS-14.html">DNS Resolving Bug in iOS 14 <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2022-08-20-Apple-In-App-Purchase-Server-to-Server-Notification-Handling-with-Scala-Java.html">Handle Apple In-App-Purchase Server Notification with Scala/Java <span class="publish-year">(2022)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Programming Language
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      C++
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-02-11-cplusplus.html">也谈C++ <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Erlang
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-07-14-Build-Erlang-the-Rebar-Way.html">Build Erlang the Rebar Way <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-11-16-Fetch-Popular-Erlang-Modules-by-Coffee-Script.html">Fetch Popular Erlang Modules by Coffee Script <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2014-04-27-Why-I-Come-Back-to-Erlang.html">Why I Come Back to Erlang <span class="publish-year">(2014)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2014-05-16-Experiment-On-Combining-OOP-With-Erlang's-Actor-Model.html">Experiment On Combining OOP With Erlang's Actor Model <span class="publish-year">(2014)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Go
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2014-09-01-Notes-On-Go-Scheduler.html">Notes On Go Scheduler <span class="publish-year">(2014)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Javascript
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-12-17-Beautiful-Math-with-MathJex.html">Beautiful Math with MathJex <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2014-01-28-HTML-+-CSS-+-JS-is-Good.html">HTML + CSS + JS is Good <span class="publish-year">(2014)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2014-02-14-What-is-Wrong-about-HTML.html">What is Wrong about HTML and CSS <span class="publish-year">(2014)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Scala
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2016-07-11-Config-sbt-to-Use-Both-Proxy-and-Self-Hosted-Repositories.html">Config sbt to Use Both Proxy and Self Hosted Repositories <span class="publish-year">(2016)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-08-27-Compare-Task-Processing-Approaches-in-Scala.html">Compare Task Processing Approaches in Scala <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-09-30-A-Boring-JVM-Memory-Profiling-Story.html">A Boring JVM Memory Profiling Story <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-12-29-Scala-Macro-Tutorial.html">Scala 2 Macro Tutorial <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Scheme
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-01-27-sicp30.html">SICP第三章总结（上）——可变量与环境 <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-03-14-sicp35.html">SICP第三章总结（下）——流编程 <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Type System
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2014-08-02-RESTful-API-with-Type-System.html">RESTful API with Type System <span class="publish-year">(2014)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-07-11-Powerful-Type-System.html">Powerful Type System <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Software Engineering
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-12-18-Call-Program-Like-A-Function.html">Call Program Like A Function <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-04-02-More-About-Program-In-Shell-And-Function.html">More About Program In Shell And Function <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-11-05-Server-Logic-of-Level-Based-Games.html">Server Logic of Level Based Games <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-12-08-Languages-Should-Have-Database-Built-In.html">Languages Should Have Database Built In <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2015-04-26-How-About-Translate-IMAP-And-SMTP-Into-HTTP-API.html">How About Translate IMAP And SMTP Into HTTP API? <span class="publish-year">(2015)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2018-09-02-The-Things-You-Need-to-Know-When-Using-Apache-Sentry.html">The Things You Need to Know When Using Apache Sentry <span class="publish-year">(2018)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2021-02-21-Define-Infrastructure-as-Code.html">Define Infrastructure as Code <span class="publish-year">(2021)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2021-06-30-Why-Big-Companies-Need-to-Adopt-Open-Source.html">Why Big Companies Need to Adopt Open Source <span class="publish-year">(2021)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Storage
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-01-10-Change-Root-File-System-from-Ext4-to-Xfs-on-Archlinux.html">Change Root File System from Ext4 to Xfs on Archlinux <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-01-28-Migrate-Arch-Linux-to-Zfs.html">Migrate Arch Linux to ZFS <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2021-09-19-Personal-ZFS-Offsite-Online-Backup-Solution.html">Personal ZFS Offsite Backup Solution <span class="publish-year">(2021)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <div class="index-selected">ZFS Profiling on Arch Linux <span class="publish-year">(2023)</span></div>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Virtualization
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-12-16-Create-A-Virtual-Machine-Network.html">Create A Virtual Machine Network <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-01-15-Fedora-Virt-manager-Guest-Connect-to-Host.html">Fedora Virt-manager Guest Connect to Host <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2014-11-03-Docker-Is-the-One-Scaffolding-to-Rule-Them-All.html">Docker Is the One Scaffolding to Rule Them All <span class="publish-year">(2014)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  

    <div class="index-entry index-index">
      
      Life
      

    </div>

  




  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-03-04-Life-in-Guangzhou.html">Life in Guangzhou <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-05-15-Recent-Works.html">Recent Works <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2014-07-20-The-Travel-to-Tokyo.html">东京之旅 <span class="publish-year">(2014)</span></a>
        
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2018-01-02-The-Year-of-2017.html">My 2017 Year in Review <span class="publish-year">(2018)</span></a>
        
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2021-01-26-My-2020-in-Review.html">My 2020 in Review <span class="publish-year">(2021)</span></a>
        
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2022-04-04-%E5%8D%81%E4%B8%89%E5%B9%B4%E5%89%8D%E8%A2%AB%E9%9A%94%E7%A6%BB%E7%9A%84%E7%BB%8F%E5%8E%86.html">十三年前被隔离的经历 <span class="publish-year">(2022)</span></a>
        
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2022-04-24-A-Travel-to-Montreal.html">A Travel to Montreal <span class="publish-year">(2022)</span></a>
        
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-01-26-My-2022-in-Review.html">My 2022 in Review <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2024-03-19-Travel-Back-to-China.html">Travel Back to China <span class="publish-year">(2024)</span></a>
        
      

    </div>

  
    </div>
  




  

    <div class="index-entry index-index">
      
      Projects
      

    </div>

  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Bard
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2014-12-16-The-Thoughts-Behind-Bard-Framework.html">The Thoughts Behind Bard Framework <span class="publish-year">(2014)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2014-12-28-Why-Use-Reflections-to-Write-A-Web-Framework.html">Why Use Reflections to Write A Web Framework <span class="publish-year">(2014)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Blog
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-11-19-my-new-blog.html">My New Blog Website <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-11-20-Comment-And-Search-Are-Available.html">Comment And Search Are Available <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-12-10-Remove-Categories.html">Remove Categories <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2021-10-31-Add-Index-to-My-Blog.html">Add Index to My Blog <span class="publish-year">(2021)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-09-24-Jekyll-Plugin-to-Load-Asciicast-Locally.html">Jekyll Plugin to Load Asciinema Recordings Locally <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-11-10-Index-Sidebar-on-My-Blog.html">Add Index Sidebar to My Blog <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      RSS Brain
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2022-10-29-RSS-Brain-Yet-Another-RSS-Reader-With-More-Features.html">RSS Brain: Yet Another RSS Reader, With More Features <span class="publish-year">(2022)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2022-12-03-How-RSS-Brain-Shows-Related-Articles.html">How RSS Brain Shows Related Articles <span class="publish-year">(2022)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-11-14-Update-On-RSS-Brain-to-Find-Related-Articles-with-Machine-Learning.html">Update on RSS Brain to Find Related Articles with Machine Learning <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Scala2grpc
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2022-05-02-A-Library-to-Make-It-Easier-to-Use-Scala-with-GRPC.html">A Library to Make It Easier to Use Scala with gRPC <span class="publish-year">(2022)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2023-09-23-Migrate-Scala2Grpc-to-Cats-Effect-3.html">Migrate Scala2grpc to Cats Effect 3 <span class="publish-year">(2023)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-03-29-Comment-Everywhere.html">Comment Everywhere <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-11-16-Fetch-Popular-Erlang-Modules-by-Coffee-Script.html">Fetch Popular Erlang Modules by Coffee Script <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  




  

    <div class="index-entry index-index">
      
      Psychology
      

    </div>

  




  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-03-10-xinlixue.html">耶鲁大学心理学导论 <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  




  

    <div class="index-entry index-index">
      
      Thoughts
      

    </div>

  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      Chinese
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2008-12-21-people-mind.html">关于人的思想 <span class="publish-year">(2008)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2008-12-22-people-mind2.html">关于人的思想（续） <span class="publish-year">(2008)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2011-05-31-china.html">览《中国文化要义》有感 <span class="publish-year">(2011)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2011-06-28-bad-guys.html">未来人们怎样对待坏人：读《理想国》杂想 <span class="publish-year">(2011)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2011-12-20-life-game.html">好玩的生命游戏 <span class="publish-year">(2011)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2012-05-19-tiandiyouyou.html">念天地之悠悠 <span class="publish-year">(2012)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2015-11-04-The-Life-of-Hermit-without-Materially.html">摒弃现代科技的隐士生活 <span class="publish-year">(2015)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2016-07-24-%E8%AF%BB-%E9%82%93%E5%B0%8F%E5%B9%B3%E6%97%B6%E4%BB%A3-%E6%9C%89%E6%84%9F.html">读《邓小平时代》有感 <span class="publish-year">(2016)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2019-08-15-%E7%94%B1-%E5%BA%9F%E9%9D%92-%E8%BF%99%E4%B8%AA%E7%A7%B0%E5%91%BC%E6%89%80%E6%83%B3%E5%88%B0%E7%9A%84.html">由“废青”这个称呼所想到的 <span class="publish-year">(2019)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-08-09-%E7%9B%9B%E5%94%90%E8%AF%97%E4%BA%BA%E5%92%8C%E8%BF%9C%E6%B8%B8.html">盛唐诗人和远游 <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  

    <div class="index-entry index-index">
      
      English
      

    </div>

  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2013-08-30-Tired-of-Programming.html">Tired of Programming <span class="publish-year">(2013)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  




  
    <div class="index-intend">
  
    <div class="index-intend">
  

    <div class="index-entry index-post">
      
        
        <a href="/2020-07-21-The-Tragic-Talented-Programmer.html">The Tragic Talented Programmer <span class="publish-year">(2020)</span></a>
        
      

    </div>

  
    </div>
  
    </div>
  





<script>

  const isIndexPage = false;

  const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0)
  const indexMenu = document.getElementById('index_menu') || document.getElementById('index_menu_page');


  document.addEventListener("DOMContentLoaded", function(event) {

    if (isIndexPage) {
      var targetHref = new URL(document.referrer).pathname;
      console.log(targetHref);

      document.querySelectorAll('a').forEach(function(anchorTag) {
        // Check if the href attribute matches the targetHref
        if (anchorTag.getAttribute('href') === targetHref) {
           var newDiv = document.createElement('div');
           newDiv.classList.add('index-selected');
           // Copy the content of the <a> tag to the new <div>
           newDiv.innerHTML = anchorTag.innerHTML;
           // Replace the <a> tag with the new <div> element
           anchorTag.parentNode.replaceChild(newDiv, anchorTag);
        }
      });

    }

    var selected = document.getElementsByClassName("index-selected")[0];

    if (!isIndexPage) {
      var scrollpos = localStorage.getItem('menu-scroll-pos');
      console.log(scrollpos);
      if (scrollpos) indexMenu.scrollTo(0, scrollpos);
    }

    if (selected !== undefined) {
      const topOffset = selected.getBoundingClientRect().top;
      if (topOffset < 0 || topOffset > vh) {
        if (isIndexPage) {
          window.scrollBy({left: 0, top: topOffset - vh / 3.0, behavior: "smooth"});
        } else {
          indexMenu.scrollBy({left: 0, top: topOffset - vh / 3.0, behavior: "smooth"});
        }
      }
    }

  });

  window.onbeforeunload = function(e) {
    if (!isIndexPage) {
      localStorage.setItem('menu-scroll-pos', indexMenu.scrollTop );
    }
  };

</script>

    </div>
    

    <div id="main_content">
    <header id="page_header">
      <div id="menu-button">
          <a href="/index_page.html">&#9776;</a>
      </div>
      <nav id="page_nav">
        <ul>
             <li><a href="/">Home</a></li>
             <li><a href="/snippets">Snippets</a></li>
             <li><a href="https://www.goodreads.com/review/list/103708630-bin?shelf=read" target="_blank">Read</a></li>
             <li><a href="/travel.html">Travel</a></li>
             <li><a href="/search.html">Search</a></li>
             <li><a href="/about.html">About</a></li>
             <li><a href="/feed.xml">RSS</a></li>
       </ul>
      </nav>

    </header>



    <section id="page_content">
        <div id="content_table">
  <h3>Table of Contents</h3><ol class="toc"><li><a href="#1-enable-debug-info-for-zfs">1. Enable Debug Info for ZFS</a></li><li><a href="#2-profiling-zfs">2. Profiling ZFS</a></li><li><a href="#3-find-root-cause">3. Find Root Cause</a></li><li><a href="#4-solution-and-workaround">4. Solution and Workaround</a></li><li><a href="#5-appendix">5. Appendix</a></li></ol>
</div>

<div id="article_content" class="">
<article id="post">
  <header>
    <h1>ZFS Profiling on Arch Linux</h1>
    
      <p class="description">Posted on 14 Dec 2023, tagged <code>ZFS</code><code>Linux</code><code>Profiling</code><code>dkms</code><code>kernel</code></p>
    
  </header>

  <p>I bought a new video game recently but found <code class="language-plaintext highlighter-rouge">z_rd_int</code> processes took almost all the CPU time when I was playing it. That doesn’t make much sense to me since I install games on a non compressed ZFS dataset. Even though I don’t have a powerful CPU, I don’t expect ZFS to use all of them and only reads about 60-70MiB/s from each of the NVME SSDs. To double check, I used <code class="language-plaintext highlighter-rouge">iostat -x 1</code> to confirm the iowait is very low. So disk IO is not the bottleneck.</p>

<p>Without finding any root cause from Internet, I decide to do some profiling by myself. From OpenZFS’ Github issues, people are using <a href="https://perf.wiki.kernel.org/index.php/Main_Page">perf</a> to do profiling. It is trivial enough to do it from a glance. But let <code class="language-plaintext highlighter-rouge">perf</code> showing debug symbols for ZFS spent me a lot of time. So in this article, I will document the steps to enable debug symbols for ZFS and hopefully it can help more people that facing difficulties to do it. After that, I will continue with how do I find the root cause and the solution. If you’ve seen my previous blog <a href="/2023-09-30-A-Boring-JVM-Memory-Profiling-Story.html">A Boring JVM Memory Profiling Story</a>, this is an even more boring profiling story. But the tool set is important. Use them efficiently and hopefully all the profiling stories become boring.</p>

<h2 id="1-enable-debug-info-for-zfs">1. Enable Debug Info for ZFS</h2>

<p>On Arch Linux, if you run <code class="language-plaintext highlighter-rouge">perf top</code>, you can see kernel has debug symbols attached like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2.95%  [kernel]                                        [k] entry_SYSCALL_64
</code></pre></div></div>

<p>But for some other processes like zfs ones, it only has an address like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2.65%  [zfs]                                           [k] 0x00000000002990cf
</code></pre></div></div>

<p>This is because perf cannot find debug info for zfs module. Let’s enable it now.</p>

<h3 id="11-use-dkms-package">1.1 Use DKMS Package</h3>

<p>First we need to use <a href="https://wiki.archlinux.org/title/Dynamic_Kernel_Module_Support">DKMS</a> package instead a pre compiled one so that we can control the compiling behaviour when build the zfs kernel module. In Arch Linux, the package name is <code class="language-plaintext highlighter-rouge">zfs-dkms</code> either in AUR or <a href="https://github.com/archzfs/archzfs">archzfs</a> repo. Be aware packages are different from those different repos even they have the same name. Personally I like archzfs repo more since it’s more well maintained and has better dependency management.</p>

<h3 id="12-enable-debuginfo-flags">1.2 Enable debuginfo Flags</h3>

<h4 id="tldr">TL;DR:</h4>

<p>Add these three lines to <code class="language-plaintext highlighter-rouge">/etc/sysconfig/zfs</code>, (re)install the zfs dkms package and reboot.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">ZFS_DKMS_ENABLE_DEBUG</span><span class="o">=</span>y
<span class="nv">ZFS_DKMS_ENABLE_DEBUGINFO</span><span class="o">=</span>y
<span class="nv">ZFS_DKMS_DISABLE_STRIP</span><span class="o">=</span>y
</code></pre></div></div>

<p>Decompress the installed ko file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>unzstd /lib/modules/&lt;your kernel version&gt;/updates/dkms/zfs.ko.zst
</code></pre></div></div>

<p>Now you should be able to see zfs symbols in <code class="language-plaintext highlighter-rouge">perf top</code>.</p>

<p>Remember to cleanup the files after profiling.</p>

<p>If you care about the reason behind these changes, continue reading. Otherwise you can skip the remaining of this section.</p>

<h4 id="what-is-etcsysconfigzfs">What is <code class="language-plaintext highlighter-rouge">/etc/sysconfig/zfs</code>?</h4>

<p>The package <code class="language-plaintext highlighter-rouge">zfs-dkms</code> only installs the code that will be compiled by dkms to <code class="language-plaintext highlighter-rouge">/usr/src/zfs-&lt;zfs-version&gt;</code>. (I learned this by reading <code class="language-plaintext highlighter-rouge">PKGBUILD</code> of the aur package). Then when <code class="language-plaintext highlighter-rouge">dkms</code> commands are run, <code class="language-plaintext highlighter-rouge">dkms</code> copies the files to <code class="language-plaintext highlighter-rouge">/var/lib/dkms/zfs/&lt;zfs-version&gt;/build</code> to build it and then install the built ko files to <code class="language-plaintext highlighter-rouge">/lib/modules/&lt;your kernel version&gt;/updates/dkms</code>. So in order to build zfs module with debug symbols, we need to let dkms uses correct compile flags.</p>

<p>Under <code class="language-plaintext highlighter-rouge">/usr/src/zfs-&lt;zfs-version&gt;</code>, there is <code class="language-plaintext highlighter-rouge">dkms.conf</code> that tells DKMS how to use the source code to build and install modules. We can find some key information there:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">PRE_BUILD</span><span class="o">=</span><span class="s2">"configure
  --prefix=/usr
  --with-config=kernel
  --with-linux=</span><span class="se">\$</span><span class="s2">(
    if [ -e "</span><span class="se">\$</span><span class="o">{</span>kernel_source_dir/%build/source<span class="o">}</span><span class="s2">" ]
    then
      echo "</span><span class="se">\$</span><span class="o">{</span>kernel_source_dir/%build/source<span class="o">}</span><span class="s2">"
    else
      echo "</span><span class="se">\$</span><span class="o">{</span>kernel_source_dir<span class="o">}</span><span class="s2">"
    fi
  )
  --with-linux-obj="</span><span class="se">\$</span><span class="o">{</span>kernel_source_dir<span class="o">}</span><span class="s2">"
  </span><span class="se">\$</span><span class="s2">(
    [[ -n </span><span class="se">\"\$</span><span class="s2">{ICP_ROOT}</span><span class="se">\"</span><span class="s2"> ]] &amp;&amp; </span><span class="se">\\</span><span class="s2">
    {
      echo --with-qat=</span><span class="se">\"\$</span><span class="s2">{ICP_ROOT}</span><span class="se">\"</span><span class="s2">
    }
  )
  </span><span class="se">\$</span><span class="s2">(
    [[ -r </span><span class="se">\$</span><span class="s2">{PACKAGE_CONFIG} ]] </span><span class="se">\\</span><span class="s2">
    &amp;&amp; source </span><span class="se">\$</span><span class="s2">{PACKAGE_CONFIG} </span><span class="se">\\</span><span class="s2">
    &amp;&amp; shopt -q -s extglob </span><span class="se">\\</span><span class="s2">
    &amp;&amp; </span><span class="se">\\</span><span class="s2">
    {
      if [[ </span><span class="se">\$</span><span class="s2">{ZFS_DKMS_ENABLE_DEBUG,,} == @(y|yes) ]]
      then
        echo --enable-debug
      fi
      if [[ </span><span class="se">\$</span><span class="s2">{ZFS_DKMS_ENABLE_DEBUGINFO,,} == @(y|yes) ]]
      then
        echo --enable-debuginfo
      fi
    }
  )
"</span>
</code></pre></div></div>

<p>There is <code class="language-plaintext highlighter-rouge">--enable-debug</code> and <code class="language-plaintext highlighter-rouge">--enable-debuginfo</code>. Run <code class="language-plaintext highlighter-rouge">./configure --help</code> shows the meaning of these two flags:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  --enable-debug          Enable compiler and code assertions [default=no]
  --enable-debuginfo      Force generation of debuginfo [default=no]
</code></pre></div></div>

<p>So if those two flags are enabled, the zfs module should be built with debug info. The code above checks <code class="language-plaintext highlighter-rouge">ZFS_DKMS_ENABLE_DEBUG</code> and <code class="language-plaintext highlighter-rouge">ZFS_DKMS_ENABLE_DEBUGINFO</code> in file <code class="language-plaintext highlighter-rouge">${PACKAGE_CONFIG}</code>. If they are <code class="language-plaintext highlighter-rouge">y</code> or <code class="language-plaintext highlighter-rouge">yes</code>, the corresponding flags are enabled. At the beginning of <code class="language-plaintext highlighter-rouge">dkms.conf</code> we can find <code class="language-plaintext highlighter-rouge">PACKAGE_CONFIG</code> is defined as <code class="language-plaintext highlighter-rouge">/etc/sysconfig/zfs</code>.</p>

<p>However, only defining <code class="language-plaintext highlighter-rouge">ZFS_DKMS_ENABLE_DEBUG</code> and <code class="language-plaintext highlighter-rouge">ZFS_DKMS_ENABLE_DEBUGINFO</code> is not enough. I learnt it the hard way. Checking <code class="language-plaintext highlighter-rouge">dkms.conf</code> more closely, we can see these code below:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>STRIP[0]<span class="o">=</span><span class="s2">"</span><span class="se">\$</span><span class="s2">(
  [[ -r </span><span class="se">\$</span><span class="s2">{PACKAGE_CONFIG} ]] </span><span class="se">\\</span><span class="s2">
  &amp;&amp; source </span><span class="se">\$</span><span class="s2">{PACKAGE_CONFIG} </span><span class="se">\\</span><span class="s2">
  &amp;&amp; shopt -q -s extglob </span><span class="se">\\</span><span class="s2">
  &amp;&amp; [[ </span><span class="se">\$</span><span class="s2">{ZFS_DKMS_DISABLE_STRIP,,} == @(y|yes) ]] </span><span class="se">\\</span><span class="s2">
  &amp;&amp; echo -n no
)"</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">man dkms</code> shows the meaning of <code class="language-plaintext highlighter-rouge">STRIP</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>STRIP[#]=
       By default strip is considered to be "yes". If set to  "no",  DKMS  will
       not  run strip -g against your built module to remove debug symbols from
       it.  STRIP[0] is used as the default for any unset entries in the  STRIP
       array.
</code></pre></div></div>

<p>If <code class="language-plaintext highlighter-rouge">STRIP</code> is not set to <code class="language-plaintext highlighter-rouge">no</code>, <code class="language-plaintext highlighter-rouge">dkms</code> will stripe the debug info! So we also need to set <code class="language-plaintext highlighter-rouge">ZFS_DKMS_DISABLE_STRIP</code> in <code class="language-plaintext highlighter-rouge">/etc/sysconfig/zfs</code> to <code class="language-plaintext highlighter-rouge">y</code> or <code class="language-plaintext highlighter-rouge">yes</code> so that <code class="language-plaintext highlighter-rouge">STRIP[0]</code> will be <code class="language-plaintext highlighter-rouge">no</code>.</p>

<h4 id="why-unzstd">Why unzstd?</h4>

<p>In my system, the dkms modules are compressed with zstd when installing. But it seems <code class="language-plaintext highlighter-rouge">perf</code> is not able to read the compressed module file in order to find the debug symbols, so we need to uncompress it at the same location.</p>

<h2 id="2-profiling-zfs">2. Profiling ZFS</h2>

<p><code class="language-plaintext highlighter-rouge">perf top</code> can show the CPU usage for each function in real time. But in order to analysis it better, we can record it with <code class="language-plaintext highlighter-rouge">perf record -g -p &lt;pid&gt;</code>. It should generate <code class="language-plaintext highlighter-rouge">perf.data</code> file in the current directory. Press <code class="language-plaintext highlighter-rouge">Ctrl + C</code> to stop the recording and flush the file.</p>

<p>Then use <code class="language-plaintext highlighter-rouge">sudo perf report</code> to show the report of the recording. Mine is like this (press <code class="language-plaintext highlighter-rouge">+</code> to extend a row of interest in <code class="language-plaintext highlighter-rouge">perf report</code>):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Samples: 277K of event 'cycles:P', Event count (approx.): 244633155596
Children      Self  Command   Shared Object     Symbol
+   96.59%     0.01%  z_rd_int  [zfs]             [k] zio_do_crypt_uio
+   96.58%     0.00%  z_rd_int  [zfs]             [k] crypto_decrypt
+   96.57%     0.01%  z_rd_int  [zfs]             [k] aes_decrypt_atomic
+   75.53%     8.17%  z_rd_int  [zfs]             [k] aes_encrypt_block
+   49.76%     0.00%  z_rd_int  [zfs]             [k] crypto_update_uio
+   49.76%     0.00%  z_rd_int  [zfs]             [k] aes_decrypt_contiguous_blocks
+   49.76%     4.52%  z_rd_int  [zfs]             [k] ccm_mode_decrypt_contiguous_blocks
+   46.42%     2.08%  z_rd_int  [zfs]             [k] ccm_decrypt_final
+   42.15%     6.94%  z_rd_int  [zfs]             [k] aes_aesni_encrypt
-   24.72%    24.36%  z_rd_int  [zfs]             [k] kfpu_end
     24.36% ret_from_fork_asm
        ret_from_fork
        kthread
        0xffffffffc02b15eb
        zio_execute
        zio_done
        zio_pop_transforms
        zio_decrypt
        spa_do_crypt_abd
        zio_do_crypt_data
        zio_do_crypt_uio
        crypto_decrypt
      + aes_decrypt_atomic
-   21.20%    20.96%  z_rd_int  [zfs]             [k] kfpu_begin
     20.96% ret_from_fork_asm
        ret_from_fork
        kthread
        0xffffffffc02b15eb
        zio_execute
        zio_done
        zio_pop_transforms
        zio_decrypt
        spa_do_crypt_abd
        zio_do_crypt_data
        zio_do_crypt_uio
        crypto_decrypt
      + aes_decrypt_atomic
+   14.42%    14.21%  z_rd_int  [zfs]             [k] aes_encrypt_intel
+    7.36%     7.14%  z_rd_int  [zfs]             [k] aes_xor_block
+    6.31%     6.16%  z_rd_int  [zfs]             [k] aes_copy_block
+    1.27%     0.03%  z_rd_int  [zfs]             [k] arc_read_done
+    1.17%     0.02%  z_rd_int  [zfs]             [k] zio_vdev_io_done
+    1.14%     0.00%  z_rd_int  [zfs]             [k] abd_iterate_func
</code></pre></div></div>

<h2 id="3-find-root-cause">3. Find Root Cause</h2>

<p>From the profiling report, we can easily see that the CPU is mostly used on decrypting the content on ZFS. That makes some sense because decryption do need CPU power. But there is no reason it uses so much CPU at that throughput. In fact found some performance issues related encryption and did something to rule out some causes:</p>

<ol>
  <li>I made sure the AES hardware acceleration is enabled for my CPU by checking <code class="language-plaintext highlighter-rouge">lscpu | grep aes</code>.</li>
  <li>My system can decrypt and encrypt at a much higher speed (2000+ MB/s) by running <code class="language-plaintext highlighter-rouge">cryptsetup benchmark</code>.</li>
</ol>

<p>That’s why I need the profiling to confirm where the bottleneck comes from.</p>

<p>Even though the code path is related to decryption, the hotspot is at <code class="language-plaintext highlighter-rouge">kfpu_begin</code> and <code class="language-plaintext highlighter-rouge">kfpu_end</code>. I read the code and have totally no idea what they are doing. I asked ChatGPT and it explains to me that it’s saving and restoring FPU state. I don’t know if its answer is correct or not, but that at least gave me some direction to search issues. At last I found this Github issue <a href="https://github.com/openzfs/zfs/pull/9749">ICP: Improve AES-GCM performance</a>. It says exactly that there is performance issue with saving FPU state when doing encryption. And the PR improves it for AES-GCM algorithm. It states AES-CCM can benifit from similar fix but the performance improvement will not be as great. So in the discussion of the PR, they decide to change the default encryption algorithm to AES-GCM instead of AES-CCM.</p>

<p>I <a href="/2020-01-28-Migrate-Arch-Linux-to-Zfs.html">started use zfs</a> before this PR. So I checked the encryption algorithm on my system by <code class="language-plaintext highlighter-rouge">zfs get all &lt;dataset&gt; | grep encryption</code>. And it is indeed using AES-CCM. In order to confirm it is causing performance issue, I did some benchmark on AES-CCM, AES-GCM and not encrypted datasets.</p>

<p>First, created the datasets:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>zfs create <span class="nt">-o</span> <span class="nv">encryption</span><span class="o">=</span>aes-256-ccm <span class="nt">-o</span> <span class="nv">compression</span><span class="o">=</span>off <span class="nt">-o</span> <span class="nv">atime</span><span class="o">=</span>off zroot/root/ccm-test
<span class="nb">sudo </span>zfs create <span class="nt">-o</span> <span class="nv">encryption</span><span class="o">=</span>aes-256-gcm <span class="nt">-o</span> <span class="nv">compression</span><span class="o">=</span>off <span class="nt">-o</span> <span class="nv">atime</span><span class="o">=</span>off zroot/root/gcm-test
<span class="nb">sudo </span>zfs create <span class="nt">-o</span> <span class="nv">encryption</span><span class="o">=</span>off <span class="nt">-o</span> <span class="nv">compression</span><span class="o">=</span>off <span class="nt">-o</span> <span class="nv">atime</span><span class="o">=</span>off zroot/local_steam_unencrypt
</code></pre></div></div>

<p>Then I write a script to benchmark it:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nb">set</span> <span class="nt">-e</span>

<span class="k">function </span>print_cputime<span class="o">()</span> <span class="o">{</span>
	<span class="nv">pname</span><span class="o">=</span><span class="nv">$1</span>
	<span class="k">for </span>pid <span class="k">in</span> <span class="sb">`</span>pgrep <span class="nv">$pname</span><span class="sb">`</span> <span class="p">;</span> <span class="k">do
		</span>ps <span class="nt">-p</span> <span class="nv">$pid</span> <span class="nt">-o</span> cputime,etime
	<span class="k">done</span>
<span class="o">}</span>


<span class="k">function </span>benchmark <span class="o">{</span>
	<span class="nv">test_name</span><span class="o">=</span><span class="nv">$1</span>
	<span class="nv">test_file</span><span class="o">=</span><span class="nv">$2</span>

	<span class="nv">file_size</span><span class="o">=</span><span class="s2">"20480"</span>

	<span class="nb">echo</span> <span class="s2">"### Start benchmark </span><span class="nv">$test_name</span><span class="s2">"</span>

	<span class="nb">echo</span> <span class="s2">"### Print z_wr_iss cpu time before the write test"</span>
	print_cputime z_wr_iss
	<span class="nb">echo</span> <span class="s2">"### Start write test"</span>
	<span class="nb">time dd </span><span class="k">if</span><span class="o">=</span>/dev/random <span class="nv">of</span><span class="o">=</span><span class="nv">$test_file</span> <span class="nv">bs</span><span class="o">=</span>1M <span class="nv">count</span><span class="o">=</span><span class="nv">$file_size</span> <span class="nv">oflag</span><span class="o">=</span>direct
	<span class="nb">echo</span> <span class="s2">"### Pring z_wr_iss cpu time afte the write test"</span>
	print_cputime z_wr_iss

	<span class="nb">echo</span> <span class="s2">"### Print z_rd_int cpu time before the read test"</span>
	print_cputime z_rd_int
	<span class="nb">echo</span> <span class="s2">"### Start read test"</span>
	<span class="nb">time dd </span><span class="k">if</span><span class="o">=</span><span class="nv">$test_file</span> <span class="nv">of</span><span class="o">=</span>/dev/null <span class="nv">bs</span><span class="o">=</span>1M <span class="nv">count</span><span class="o">=</span><span class="nv">$file_size</span>
	<span class="nb">echo</span> <span class="s2">"### Print z_rd_int cpu time before the read test"</span>
	print_cputime z_rd_int
<span class="o">}</span>

benchmark ccm-test /ccm-test/test-file
benchmark gcm-test /gcm-test/test-file
benchmark non-encrypt-test /data/local_steam/test-file
</code></pre></div></div>

<p>My ZFS cache is set to 8GB. So I write and read files with 20GB. It uses dd to write and read a file. Before the read and write, it uses <code class="language-plaintext highlighter-rouge">ps -o cputime,etime</code> to print out CPU time and wall time used by each related ZFS processes.</p>

<p>Running this script creates lots of output. The full output can be found in the appendix at the end. Here are the key lines:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>### Start benchmark ccm-test
// ... output omitted ...
21474836480 bytes (21 GB, 20 GiB) copied, 107.307 s, 200 MB/s
// ... output omitted ...
### Start benchmark gcm-test
// ... output omitted ...
21474836480 bytes (21 GB, 20 GiB) copied, 13.7417 s, 1.6 GB/s
// ... output omitted ...
### Start benchmark non-encrypt-test
// ... output omitted ...
21474836480 bytes (21 GB, 20 GiB) copied, 9.03496 s, 2.4 GB/s
// ... output omitted ...
</code></pre></div></div>

<p>During the test, AES-CCM makes <code class="language-plaintext highlighter-rouge">z_rd_int</code> takes all CPU time as observed before. For AES-GCM, it’s much better, <code class="language-plaintext highlighter-rouge">z_rd_int</code> takes less than 50% and for non encrypted it’s less than 20%. The testing output prints the CPU time and wall time for each of the <code class="language-plaintext highlighter-rouge">z_rd_int</code> processes before and after the test. So you can count the percentage.</p>

<p>From the test result, we can see AES-CCM indeed affect read performance a lot. It’s even slower than writes. We can confirm this is the root cause for our problem.</p>

<h2 id="4-solution-and-workaround">4. Solution and Workaround</h2>

<p>The solution is obvious: just change the encryption from AES-CCM to AES-GCM. But it cannot be done without migrating the dataset to another place and then move it back. It takes time. At the mean time, I moved my Steam library to a non encrypted dataset since I have enough disk space to do the migration. It doesn’t have sensitive information. Yes it exposes the machine to <a href="https://en.wikipedia.org/wiki/Evil_maid_attack">evil maid attack</a>, but my setup on the machine doesn’t prevent it anyway. See my previous blog <a href="/2021-09-19-Personal-ZFS-Offsite-Online-Backup-Solution.html">Personal ZFS Offsite Backup Solution</a> for more information on putting a machine into a not trusted environment.</p>

<p>I’ll do the migration from AES-CCM to AES-GCM in the future and report back how it works. Stay tuned!</p>

<h2 id="5-appendix">5. Appendix</h2>

<p>Here is the full output from the benchmark script:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>### Start benchmark ccm-test
### Print z_wr_iss cpu time before the write test
    TIME     ELAPSED
00:47:56  3-03:39:21
    TIME     ELAPSED
00:22:34  3-03:39:21
    TIME     ELAPSED
00:47:54  3-03:39:21
    TIME     ELAPSED
00:47:55  3-03:39:21
    TIME     ELAPSED
00:00:01  3-03:39:17
    TIME     ELAPSED
00:00:00  3-03:39:17
    TIME     ELAPSED
00:04:50    15:30:06
    TIME     ELAPSED
00:04:49    15:29:57
    TIME     ELAPSED
00:04:51    15:29:56
    TIME     ELAPSED
00:04:51    15:29:18
    TIME     ELAPSED
00:00:00    10:07:30
    TIME     ELAPSED
00:00:00       55:49
### Start write test
20480+0 records in
20480+0 records out
21474836480 bytes (21 GB, 20 GiB) copied, 91.4066 s, 235 MB/s

real	1m31.414s
user	0m0.059s
sys	0m53.252s
### Pring z_wr_iss cpu time afte the write test
    TIME     ELAPSED
00:49:23  3-03:40:53
    TIME     ELAPSED
00:22:34  3-03:40:53
    TIME     ELAPSED
00:49:21  3-03:40:53
    TIME     ELAPSED
00:49:22  3-03:40:53
    TIME     ELAPSED
00:00:01  3-03:40:49
    TIME     ELAPSED
00:00:00  3-03:40:49
    TIME     ELAPSED
00:04:50    15:31:38
    TIME     ELAPSED
00:04:50    15:31:28
    TIME     ELAPSED
00:04:51    15:31:28
    TIME     ELAPSED
00:04:51    15:30:50
    TIME     ELAPSED
00:00:00    10:09:01
    TIME     ELAPSED
00:00:00       57:21
### Print z_rd_int cpu time before the read test
    TIME     ELAPSED
00:24:46  3-03:40:53
    TIME     ELAPSED
00:00:02  3-03:40:49
    TIME     ELAPSED
00:01:50       06:47
    TIME     ELAPSED
00:01:49       06:47
### Start read test
20480+0 records in
20480+0 records out
21474836480 bytes (21 GB, 20 GiB) copied, 107.307 s, 200 MB/s

real	1m47.372s
user	0m0.060s
sys	0m8.091s
### Print z_rd_int cpu time after the read test
    TIME     ELAPSED
00:26:24  3-03:42:41
    TIME     ELAPSED
00:00:02  3-03:42:37
    TIME     ELAPSED
00:03:28       08:34
    TIME     ELAPSED
00:03:27       08:34
### Start benchmark gcm-test
### Print z_wr_iss cpu time before the write test
    TIME     ELAPSED
00:49:35  3-03:42:41
    TIME     ELAPSED
00:22:34  3-03:42:41
    TIME     ELAPSED
00:49:33  3-03:42:41
    TIME     ELAPSED
00:49:33  3-03:42:41
    TIME     ELAPSED
00:00:01  3-03:42:37
    TIME     ELAPSED
00:00:00  3-03:42:37
    TIME     ELAPSED
00:04:50    15:33:26
    TIME     ELAPSED
00:04:50    15:33:16
    TIME     ELAPSED
00:04:51    15:33:16
    TIME     ELAPSED
00:04:51    15:32:38
    TIME     ELAPSED
00:00:00    10:10:49
    TIME     ELAPSED
00:00:00       59:08
### Start write test
20480+0 records in
20480+0 records out
21474836480 bytes (21 GB, 20 GiB) copied, 56.9529 s, 377 MB/s

real	0m56.960s
user	0m0.045s
sys	0m53.566s
### Pring z_wr_iss cpu time afte the write test
    TIME     ELAPSED
00:49:42  3-03:43:38
    TIME     ELAPSED
00:22:35  3-03:43:38
    TIME     ELAPSED
00:49:39  3-03:43:38
    TIME     ELAPSED
00:49:39  3-03:43:38
    TIME     ELAPSED
00:00:01  3-03:43:34
    TIME     ELAPSED
00:00:00  3-03:43:34
    TIME     ELAPSED
00:04:51    15:34:23
    TIME     ELAPSED
00:04:50    15:34:14
    TIME     ELAPSED
00:04:52    15:34:13
    TIME     ELAPSED
00:04:52    15:33:35
    TIME     ELAPSED
00:00:00    10:11:46
    TIME     ELAPSED
00:00:00    01:00:06
### Print z_rd_int cpu time before the read test
    TIME     ELAPSED
00:26:24  3-03:43:38
    TIME     ELAPSED
00:00:02  3-03:43:34
    TIME     ELAPSED
00:00:00       00:05
    TIME     ELAPSED
00:00:00       00:05
### Start read test
20480+0 records in
20480+0 records out
21474836480 bytes (21 GB, 20 GiB) copied, 13.7417 s, 1.6 GB/s

real	0m13.743s
user	0m0.071s
sys	0m11.215s
### Print z_rd_int cpu time after the read test
    TIME     ELAPSED
00:26:31  3-03:43:52
    TIME     ELAPSED
00:00:02  3-03:43:48
    TIME     ELAPSED
00:00:07       00:19
    TIME     ELAPSED
00:00:07       00:19
### Start benchmark non-encrypt-test
### Print z_wr_iss cpu time before the write test
    TIME     ELAPSED
00:49:42  3-03:43:52
    TIME     ELAPSED
00:22:35  3-03:43:52
    TIME     ELAPSED
00:49:40  3-03:43:52
    TIME     ELAPSED
00:49:39  3-03:43:52
    TIME     ELAPSED
00:00:01  3-03:43:48
    TIME     ELAPSED
00:00:00  3-03:43:48
    TIME     ELAPSED
00:04:51    15:34:37
    TIME     ELAPSED
00:04:50    15:34:28
    TIME     ELAPSED
00:04:52    15:34:28
    TIME     ELAPSED
00:04:52    15:33:49
    TIME     ELAPSED
00:00:00    10:12:01
    TIME     ELAPSED
00:00:00    01:00:20
### Start write test
20480+0 records in
20480+0 records out
21474836480 bytes (21 GB, 20 GiB) copied, 56.0508 s, 383 MB/s

real	0m56.052s
user	0m0.042s
sys	0m53.060s
### Pring z_wr_iss cpu time afte the write test
    TIME     ELAPSED
00:49:46  3-03:44:49
    TIME     ELAPSED
00:22:35  3-03:44:49
    TIME     ELAPSED
00:49:44  3-03:44:49
    TIME     ELAPSED
00:49:43  3-03:44:49
    TIME     ELAPSED
00:00:01  3-03:44:44
    TIME     ELAPSED
00:00:00  3-03:44:44
    TIME     ELAPSED
00:04:51    15:35:33
    TIME     ELAPSED
00:04:50    15:35:24
    TIME     ELAPSED
00:04:52    15:35:24
    TIME     ELAPSED
00:04:52    15:34:46
    TIME     ELAPSED
00:00:00    10:12:57
    TIME     ELAPSED
00:00:00    01:01:16
### Print z_rd_int cpu time before the read test
    TIME     ELAPSED
00:26:31  3-03:44:49
    TIME     ELAPSED
00:00:02  3-03:44:45
    TIME     ELAPSED
00:00:07       01:16
    TIME     ELAPSED
00:00:07       01:16
### Start read test
20480+0 records in
20480+0 records out
21474836480 bytes (21 GB, 20 GiB) copied, 9.03496 s, 2.4 GB/s

real	0m9.036s
user	0m0.032s
sys	0m8.207s
### Print z_rd_int cpu time after the read test
    TIME     ELAPSED
00:26:33  3-03:44:58
    TIME     ELAPSED
00:00:02  3-03:44:54
    TIME     ELAPSED
00:00:09       01:25
    TIME     ELAPSED
00:00:09       01:25
</code></pre></div></div>

</article>

<footer id="post_footer">
  <table><tr>
    
      <td id="prev"><a href="/2023-11-28-Introduce-K3s-CephFS-and-MetalLB-to-My-High-Avaliable-Cluster.html">Prev: Introduce K3s, CephFS and MetalLB to My High Avaliable Cluster</a></td>
    
    
      <td id="next"><a href="/2023-12-29-Scala-Macro-Tutorial.html" id="next">Next: Scala 2 Macro Tutorial</a></td>
    
  </tr></table>
</footer>

<!--
<section id="comment">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'crazy-hot-ice'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>
-->



<!-- MathJax -->
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>

</div>

    </section>

    <footer id="page_footer">
      Copyright @ 2008 - 2024 Bin Wang
      <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.
    </footer>
    </div>
  </body>
</html>
